<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSA Text Summarizer</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; background-color: #f4f7f6; }
        h1 { text-align: center; color: #2C3E50; }
        textarea { width: 100%; min-height: 250px; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; margin-bottom: 15px; resize: vertical; }
        button { background-color: #3498DB; color: white; padding: 12px 20px; border: none; cursor: pointer; border-radius: 5px; font-size: 16px; transition: background-color 0.3s; }
        button:hover { background-color: #2980B9; }
        #summary-output { border: 2px solid #2ECC71; padding: 20px; background-color: #E8F8F5; margin-top: 25px; min-height: 50px; white-space: pre-wrap; border-radius: 5px; font-size: 1.1em; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #34495E; }
    </style>
</head>
<body>

    <h1>LText Summarizer Tool</h1>
    <hr>

    <label for="text-input">Paste Your Article Here:</label>
    <textarea id="text-input" placeholder="Start typing or paste your article..."></textarea>
    
    <label for="sentence-count">Number of Sentences in Summary (Max 10):</label>
    <input type="number" id="sentence-count" value="3" min="1" max="10" style="padding: 5px; margin-bottom: 15px;">

    <button onclick="getSummary()">Summarize Text</button>

    <h2>Summary Result:</h2>
    <div id="summary-output">
        Click 'Summarize Text' to see the summary generated by the Python LSA model.
    </div>

    <script>
        async function getSummary() {
            const textInput = document.getElementById('text-input');
            const sentenceCountInput = document.getElementById('sentence-count');
            const outputDiv = document.getElementById('summary-output');
            
            const text = textInput.value.trim();
            const sentences = parseInt(sentenceCountInput.value, 10) || 3;

            if (text === "") {
                outputDiv.innerText = "Please paste some text to summarize.";
                return;
            }

            // Show loading message
            outputDiv.innerText = "Processing... Please wait (Calling Python API)";
            
            try {
                // Send the data to the Flask API endpoint
                const response = await fetch('/api/summarize', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: text,
                        sentences: sentences
                    })
                });

                const data = await response.json();

                // Display the result from the backend
                if (data.status === 'success') {
                    outputDiv.innerText = data.summary;
                } else {
                    // Display error message from the backend (e.g., if sumy fails)
                    outputDiv.innerText = `Error: ${data.summary}`;
                }

            } catch (error) {
                // Handle network or other fetch errors
                outputDiv.innerText = `An error occurred while connecting to the server: ${error.message}`;
                console.error('Fetch Error:', error);
            }
        }
    </script>

</body>
</html>